to run:
gcc p4.c -o p4 -lpthread;
rm -f endpoints

./p4 3 6 5 4 3 2 1
